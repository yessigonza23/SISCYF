
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:body>
	<ui:composition template="/WEB-INF/templates/master.xhtml">
		<ui:define name="content">
			<h:form id="frm">
				<h3 style="color: #003778; text-align: center">TRÁMITE:
					#{bandejaEntradaCalificacionesDetUsuarioBean.banTipoTramite.descripcion}
					- TÉCNICO: #{bandejaEntradaUsuarioBean.usuario.nombre}</h3>
				<p:growl id="growl" showDetail="true" sticky="true">
					<p:autoUpdate />
				</p:growl>
				<p:panelGrid columns="2" layout="grid"
					columnClasses="ui-grid-col-11,ui-grid-col-1">
					<p:panel id="pn_datosg" style="width:100%">

						<p:dataTable id="dt"
							value="#{bandejaEntradaCalificacionesDetUsuarioBean.listaBandejaEntrada}"
							var="e" selectionMode="single"
							selection="#{bandejaEntradaCalificacionesDetUsuarioBean.bandejaEntrada}"
							rowKey="#{e.id}" rowIndexVar="index">
							<p:ajax event="rowSelect"
								listener="#{bandejaEntradaCalificacionesDetUsuarioBean.onRowSelect}" />
							<p:ajax event="rowUnselect"
								listener="#{bandejaEntradaCalificacionesDetUsuarioBean.onRowUnselect}" />

							<p:column headerText="RUC"
								filterBy="#{e.calificacionesRenovaciones.empresa.ruc}"
								filterMatchMode="contains" style="width:10px;">
								<p:outputLabel
									value="#{e.calificacionesRenovaciones.empresa.ruc}" />
							</p:column>
							<p:column headerText="Empresa"
								filterBy="#{e.calificacionesRenovaciones.empresa.nombre}"
								filterMatchMode="contains" style="width:50px;">
								<p:outputLabel
									value="#{e.calificacionesRenovaciones.empresa.nombre}" />
							</p:column>
							<p:column headerText="Fecha Trámite" style="width:10px;">
								<p:outputLabel value="#{e.fecha}" />
							</p:column>
							<p:column headerText="Usuario asignado"
								filterBy="#{e.usuario.nombre}" filterMatchMode="contains"
								style="width:30px;">
								<p:outputLabel value="#{e.usuario.nombre}" />
							</p:column>
							<p:column headerText="Cambiar Estado" style="width:100px">
								<p:inputTextarea type="text" style="width:400px; height:100px"
									value="#{e.observacion}" rows="5" cols="30" counter="display"
									maxlength="1000" counterTemplate="{0} characters remaining."
									autoResize="false" id="intexarea" />
								<p:column></p:column>
								<h:outputText id="display" class="p-d-block" />
								<p:tooltip for="intexarea"
									value="Cambie la observación antes de devolver el trámite"
									position="bottom" />
								<p:commandButton icon="fa fa-fw fa-edit" update="dt" id="btnDev"
									actionListener="#{bandejaEntradaCalificacionesDetUsuarioBean.devolverTramite(e,e.observacion)}">
								</p:commandButton>
								<p:tooltip for="btnDev"
									value="Cambie la observación antes de devolver el trámite"
									position="bottom" />
							</p:column>
						</p:dataTable>
					</p:panel>
					<p:panel id="pn_opciones" style="width:100%">

						<p:commandLink
							action="#{bandejaEntradaCalificacionesDetUsuarioBean.regresarBandejaEntrada()}"
							id="cmdlink_regr">
							<h:graphicImage library="images" name="back.png" />
						</p:commandLink>
						<p:tooltip for="cmdlink_regr" value="Regresar"
							position="bottom" />
						<br />
						<p:commandLink action="#{navegarVistasBean.principal()}"
							id="cmdlink_prin">
							<h:graphicImage library="images" name="home.png" />
						</p:commandLink>
						<p:tooltip for="cmdlink_prin" value="Pantalla Principal"
							position="bottom" />


					</p:panel>
				</p:panelGrid>


			</h:form>
		</ui:define>

	</ui:composition>
</h:body>
</html>