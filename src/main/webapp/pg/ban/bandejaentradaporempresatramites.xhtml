
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:body>
	<ui:composition template="/WEB-INF/templates/master.xhtml">
		<ui:define name="content">
			<h:form id="frm">
				<h3 style="color: #003778; text-align: center">BANDEJA DE
					ENTRADA POR EMPRESA :
					#{bandejaEntradaPorEmpresaTramitesBean.empresa.nombre}</h3>
				<p:growl id="growl" showDetail="true" sticky="true">
					<p:autoUpdate />
				</p:growl>

				<p:panelGrid columns="2"
					columnClasses="ui-grid-col-11,ui-grid-col-1"
					style="text-align: left;width:100%">
					<p:panel id="pn_datosg" style="width:100%">

						<p:panelGrid columns="2"
							columnClasses="ui-grid-col-3,ui-grid-col-8"
							style="text-align: left;width:100%">
							<p:dataTable id="dt"
								value="#{bandejaEntradaPorEmpresaTramitesBean.listaTramites}"
								var="e" selectionMode="single"
								selection="#{bandejaEntradaPorEmpresaTramitesBean.banTipoTramite}"
								rowKey="#{e.id}" rowIndexVar="index">

								<p:ajax event="rowSelect"
									listener="#{bandejaEntradaPorEmpresaTramitesBean.onRowSelect}"
									update=":frm:dt_tra" />
								<p:ajax event="rowUnselect"
									listener="#{bandejaEntradaPorEmpresaTramitesBean.onRowUnselect}"
									update=":frm:dt_tra" />

								<p:column headerText="Trámite" filterBy="#{e.descripcion}"
									filterMatchMode="contains" style="width:20px">
									<p:outputLabel value="#{e.descripcion}" />
								</p:column>
							</p:dataTable>

							<p:dataTable id="dt_tra"
								value="#{bandejaEntradaPorEmpresaTramitesBean.listaBandeja}"
								var="e" selectionMode="single"
								selection="#{bandejaEntradaPorEmpresaTramitesBean.bandejaEntrada}"
								rowKey="#{e.id}" rowIndexVar="index" rows="5" paginator="true"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rowsPerPageTemplate="5,10,15" sortOrder="descending"
								paginatorPosition="top"
								emptyMessage="No hay ningún registro con esa opción">

								<p:ajax event="rowSelect"
									listener="#{bandejaEntradaPorEmpresaTramitesBean.onRowSelectTramite}"
									update=":frm:dialogoTra" />
								<p:ajax event="rowUnselect"
									listener="#{bandejaEntradaPorEmpresaTramitesBean.onRowSelectTramite}"
									update=":frm:dialogoTra" />

								<p:column headerText="No. Trámite" filterBy="#{e.num_tramite}"
									filterMatchMode="contains" style="width:20px">
									<p:outputLabel value="#{e.num_tramite}" />
								</p:column>
								<p:column headerText="Estado"
									filterBy="#{e.banCatalogoEstados.descripcion}"
									filterMatchMode="contains" style="width:20px">
									<p:outputLabel value="#{e.banCatalogoEstados.descripcion}" />
								</p:column>
								<p:column headerText="Fecha Estado" filterBy="#{e.fecha}"
									filterMatchMode="contains" style="width:20px">
									<p:outputLabel value="#{e.fecha}" />
								</p:column>
								<p:column headerText="Responsable"
									filterBy="#{e.usuario.nombre}" filterMatchMode="contains"
									style="width:20px">
									<p:outputLabel value="#{e.usuario.nombre}" />
								</p:column>
							</p:dataTable>
						</p:panelGrid>
					</p:panel>
					<p:panel id="pn_opciones" style="width:100%">

						<p:commandButton id="btnRegresar" value="Principal"
							icon="ui-icon-circle-arrow-w"
							action="#{navegarVistasBean.principal()}" />
					</p:panel>
				</p:panelGrid>

				<p:dialog id="dialogoTra" widgetVar="wdgTra" resizable="false"
					width="1000" draggable="true" modal="true" position="center"
					closeOnEscape="true" positionType="absolute">

					<h2 style="color: #003778; text-align: center">DETALLE
						TRÁMITE:
						#{bandejaEntradaPorEmpresaTramitesBean.bandejaEntrada.num_tramite}</h2>

					<p:dataTable id="dt_detalle" var="e"
						value="#{bandejaEntradaPorEmpresaTramitesBean.listaBandejaDetalle}"
						rows="5" paginator="true"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="5,10,15" sortOrder="descending"
						paginatorPosition="top"
						emptyMessage="No hay ningún registro con esa opción">

						<p:column headerText="Estado" style="width:50px">
							<p:outputLabel value="#{e.banCatalogoEstados.descripcion}" />
						</p:column>
						<p:column headerText="Fecha" style="width:100px">
							<p:outputLabel value="#{e.fecha}" />
						</p:column>
						<p:column headerText="Fecha Vencimiento" style="width:100px">
							<p:outputLabel value="#{e.fecha_vencimiento}" />
						</p:column>
						<p:column headerText="Responsable" style="width:100px">
							<p:outputLabel value="#{e.usuario.nombre}" />
						</p:column>
						<p:column headerText="Observación" style="width:500px">
							<p:outputLabel value="#{e.observacion}" />
						</p:column>


					</p:dataTable>

				</p:dialog>

			</h:form>
		</ui:define>

	</ui:composition>
</h:body>
</html>