<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<p:growl id="mensaje" autoUpdate="false" showSummary="false"
	showDetail="true" />

<p:dataTable id="dt" var="e"
	value="#{consultaEntidadesBean.listaCalRenovaciones1}"
	selectionMode="single"
	selection="#{consultaEntidadesBean.calificacionesRenovaciones}"
	rowKey="#{e.id}" editable="true">
	<p:column style="width:35px" headerText="Editar">
		<p:rowEditor />
	</p:column>
	<p:ajax event="rowEdit" listener="#{consultaEntidadesBean.operar(e)}"
		update=":frm:tabView:tabViewCalRen:dt" />
	<p:ajax event="rowEditCancel"
		listener="#{consultaEntidadesBean.onRowCancel}"
		update=":frm:tabView:tabViewCalRen:dt" />
	<p:ajax event="rowSelect"
		listener="#{consultaEntidadesBean.onRowSelect}"
		update=":frm:tabView:tabViewCalRen:pn_actividades,:frm:tabView:tabViewCalRen:pn_sustancias,:frm:tabView:tabViewCalRen:pn_tiposustancia,:frm:tabView:tabViewCalRen:menReq" />
	<p:ajax event="rowUnselect"
		listener="#{consultaEntidadesBean.onRowUnselect}"
		update=":frm:tabView:tabViewCalRen:pn_actividades,:frm:tabView:tabViewCalRen:pn_sustancias,:frm:tabView:tabViewCalRen:pn_tiposustancia,:frm:tabView:tabViewCalRen:menReq" />

	<p:column headerText="No.a" style="width:20px">
		<p:outputLabel value="#{e.secuencia}" />
	</p:column>
	<p:column headerText="Fecha Renovación" style="width:100px">
		<p:outputLabel value="#{e.fecha_renovacion}" />
	</p:column>
	<p:column headerText="Fecha caducidad" style="width:100px">
		<p:outputLabel value="#{e.fecha_caducidad}" />
	</p:column>
	<p:column headerText="No. Informe" style="width:150px">
		<p:outputLabel id="informe" value="#{e.numero_informe}">
		</p:outputLabel>
	</p:column>
	<p:column headerText="Estado" style="width:80px">
		<p:outputLabel id="aprobado" value="#{e.aprobado}">
			<f:converter converterId="estadoAprobados" />
		</p:outputLabel>
	</p:column>
	<p:column headerText="Categ.Actual"
		style="width:80px;text-align:center">
		<p:outputLabel id="categoriaActual" value="#{e.categoria_actual}"
			style="width:20px;color:coral;font-weight:bold">
		</p:outputLabel>
	</p:column>
	<p:column headerText="Cupo kg actual" style="width:80px">
		<p:outputLabel id="cupoKgActual" value="#{e.cupo_kg_actual}"
			style="width:50px;color:coral;font-weight:bold">
			<f:convertNumber type="number" groupingUsed="true"
				minFractionDigits="4" pattern="#0.0000" />
		</p:outputLabel>
	</p:column>
	<p:column headerText="Factura:" style="width:100px">
		<p:outputLabel id="txtFactura" disabled="true" autocomplete="off"
			value="#{e.factura}">
		</p:outputLabel>
	</p:column>
	<p:column headerText="Observación" style="width:200px">
		<p:cellEditor>
			<f:facet name="output">
				<h:outputText value="#{e.observacion}" style="width:100%" />
			</f:facet>

			<f:facet name="input">
				<h:inputText value="#{e.observacion}" size="200" style="width:100%" />
			</f:facet>
		</p:cellEditor>
	</p:column>

</p:dataTable>
<p:panel id="menReq" style="width:100%">
	<p:outputLabel value="#{consultaEntidadesBean.mensajeReqRT}"
		style="width:20px;color:coral;font-weight:bold" />
</p:panel>
<h:panelGrid columns="2" columnClasses="topAligned">
	<p:panel id="pn_actividades" style="width:100%">
		<ui:include src="/pg/ent/consultacalrenactividades.xhtml" />
	</p:panel>
	<p:panel id="pn_tiposustancia" style="width:100%">
		<ui:include src="/pg/ent/consultacalrentiposustancias.xhtml" />
	</p:panel>
</h:panelGrid>

<p:panel id="pn_sustancias">
	<ui:include src="/pg/ent/consultasustancias.xhtml" />
</p:panel>

</html>
