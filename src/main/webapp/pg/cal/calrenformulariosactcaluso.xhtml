<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition template="/WEB-INF/templates/master.xhtml">
		<ui:define name="content">
			<h:form id="frm">
				<h3 style="color: #003778; text-align: center">
					#{consultaCalRenFormulariosUsoCalBean.empresa.nombre}</h3>
				<p:growl id="mensaje" autoUpdate="false" showSummary="false"
					showDetail="true" />
				<p:panelGrid columns="2" columnClasses="topAligned"
					style="text-align: left;width:100%">
					<p:panel id="pn_form_rec"
						style="width:100%;height:1000px;position:relativo">
						<p:panelGrid columns="6" columnClasses="topAligned"
							style="text-align: left;width:100%">
							<f:facet name="header">
								<h:outputText value="INFORMACIÓN DE LA CALIFICACIÓN" />
							</f:facet>
							<p:outputLabel styleClass="especialstrong" value="Secuencia:" />
							<p:outputLabel
								value="#{consultaCalRenFormulariosUsoCalBean.calRen.secuencia}" />

							<p:outputLabel styleClass="especialstrong"
								value="Fecha Renovación" />
							<p:outputLabel
								value="#{consultaCalRenFormulariosUsoCalBean.calRen.fecha_renovacion}" />

							<p:outputLabel styleClass="especialstrong"
								value="Fecha Caducidad" />
							<p:outputLabel
								value="#{consultaCalRenFormulariosUsoCalBean.calRen.fecha_caducidad}" />
						</p:panelGrid>
						<!-- INFORMACIÓN DE USO Y EMPLEO DE SUSTANCIAS -->
						<p:dataTable id="dt_formulario_emp" var="e"
							value="#{consultaCalRenFormulariosUsoCalBean.listaCalRenSustanciasEmpleo}"
							rows="5" paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15" sortOrder="descending"
							paginatorPosition="top"
							emptyMessage="No hay ningún registro con esa opción">

							<f:facet name="header">
								<h:outputText value="EMPLEO DE LAS SUSTANCIAS" />
							</f:facet>
							<p:column headerText="Sustancia" style="width:80px">
								<p:outputLabel value="#{e.calrenSustancias.sustancias.nombre}">
								</p:outputLabel>
							</p:column>
							<p:column headerText="Tipo de empleo" style="width:80px">
								<p:outputLabel value="#{e.tipo_empleo}">
									<f:converter converterId="tipoEmpleo" />
								</p:outputLabel>
							</p:column>
							<p:column headerText="Uso industrial de la sustancia"
								style="width:80px">
								<p:outputLabel value="#{e.usos.nombre}">
								</p:outputLabel>
							</p:column>
							<p:column headerText="En qué" style="width:80px">
								<p:outputLabel value="#{e.observacion}">
								</p:outputLabel>
							</p:column>
						</p:dataTable>


						<!-- INFORMACIÓN DE PRODUCTOS -->
						<p:dataTable id="dt_formulario_pro" var="e"
							value="#{consultaCalRenFormulariosUsoCalBean.listaCalrenIntProductos}"
							selectionMode="single"
							selection="#{consultaCalRenFormulariosUsoCalBean.calRenProductos}"
							rowKey="#{e.id}" rows="5" paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15" sortOrder="descending"
							paginatorPosition="top"
							emptyMessage="No hay ningún registro con esa opción">

							<p:ajax event="rowSelect"
								listener="#{consultaCalRenFormulariosUsoCalBean.onRowSelect}"
								update=":frm:dt_formulario_int" />
							<p:ajax event="rowUnselect"
								listener="#{consultaCalRenFormulariosUsoCalBean.onRowUnselect}"
								update=":frm:dt_formulario_int" />

							<f:facet name="header">
								<h:outputText
									value="PRODUCTOS A ELABORAR EN LA ACTIVIDAD DE USO" />
							</f:facet>
							<p:column headerText="Productos elaborado" style="width:80px">
								<p:outputLabel value="#{e.nombre}">
								</p:outputLabel>
							</p:column>
						</p:dataTable>

						<!--LLENAR INTERVENCIONES -->
						<p:dataTable id="dt_formulario_int" var="e"
							value="#{consultaCalRenFormulariosUsoCalBean.listaCalrenIntervenciones}"
							rowIndexVar="index" rows="5" paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15" sortOrder="descending"
							paginatorPosition="top" scrollable="true">

							<f:facet name="header">
								<h:outputText
									value="INTERVENCIONES Y FORMULACIONES PARA ELABORACIÓN DE PRODUCTOS TERMINADOS/INTERMEDIOS Y DILUCIONES" />
							</f:facet>
							<p:column headerText="Tipo de producto" style="width:80px">
								<p:outputLabel value="#{e.tipo_producto}">
									<f:converter converterId="tipoProducto" />
								</p:outputLabel>
							</p:column>
							<p:column headerText="Sustancia Catalogada" style="width:80px">
								<p:outputLabel value="#{e.calrenSustancias.sustancias.nombre}">
								</p:outputLabel>
							</p:column>
							<p:column headerText="Otras No Controladas" style="width:80px">
								<p:outputLabel value="#{e.sustanciasNoControladas.nombre}">
								</p:outputLabel>
							</p:column>

							<p:column headerText="Porcentaje" style="width:80px;text-align:right">
								<p:outputLabel value="#{e.porcentaje}">
									<f:convertNumber type="number" groupingUsed="true"
										minFractionDigits="2" pattern="#0.00" />
								</p:outputLabel>
							</p:column>

							<p:column headerText="Relacion" style="width:80px;text-align:center">
								<p:outputLabel value="#{e.relacion_porcentual}">
								</p:outputLabel>
							</p:column>

							<p:column headerText="Capacidad Instalada Nominal (CN) - kg/año"
								style="width:80px;text-align:right">
								<p:outputLabel value="#{e.cap_ins_nominal}">
									<f:convertNumber type="number" groupingUsed="true"
										minFractionDigits="2" pattern="#0.00" />
								</p:outputLabel>
							</p:column>
							<p:column headerText="Capacidad Instalada Real (CR) - kg/año"
								style="width:80px;text-align:right">
								<p:outputLabel value="#{e.cap_ins_real}">
									<f:convertNumber type="number" groupingUsed="true"
										minFractionDigits="2" pattern="#0.00" />
								</p:outputLabel>
							</p:column>
							<p:column headerText="Rendimiento (CR/CN)" style="width:80px;text-align:right">
								<p:outputLabel value="#{e.rendimiento}">
									<f:convertNumber type="number" groupingUsed="true"
										minFractionDigits="2" pattern="#0.00" />
								</p:outputLabel>
							</p:column>

							<p:columnGroup type="header">
								<p:row>
									<p:row>
										<p:column rowspan="1" headerText="Tipo de producto" />
										<p:column colspan="2" headerText="Componentes" />
										<p:column colspan="1" headerText="Porcentaje" />
										<p:column colspan="1" headerText="Relación Porcentual" />
										<p:column colspan="2"
											headerText="Capacidad Instalada - kg/año" />
										<p:column colspan="1" headerText="Rendimiento" />
									</p:row>
								</p:row>
								<p:row>
									<p:column></p:column>
									<p:column headerText="Sustancia Catalogada" />
									<p:column headerText="Otras No controladas" />
									<p:column></p:column>
									<p:column></p:column>
									<p:column headerText="Nominal de uso" />
									<p:column headerText="Real de uso" />
									<p:column></p:column>
								</p:row>
							</p:columnGroup>



							<p:columnGroup type="footer">
								<p:row>
									<p:column />
									<p:column />
																		
									<p:column colspan="1" style="text-align:right"
										footerText="Total:" />
									<p:column style="text-align:right">
										<f:facet name="footer">
											<p:outputLabel id="total"
												value="#{consultaCalRenFormulariosUsoCalBean.total_porcentaje}">
												<f:convertNumber pattern="###,##0.00" />
											</p:outputLabel>
										</f:facet>
									</p:column>
									<p:column />
									<p:column />
									<p:column />
									<p:column />
								</p:row>
							</p:columnGroup>

						</p:dataTable>
					</p:panel>
					<p:panel id="pn_opc_form_uso"
						style="width:100%;height:1000px;position:relative;">
						<p:commandButton id="btnRegresar" value="Regresar"
							style="width:120px" icon="ui-icon-circle-arrow-w"
							actionListener="#{consultaCalRenFormulariosUsoCalBean.irFormularios()}" />
					</p:panel>
				</p:panelGrid>
			</h:form>
		</ui:define>

	</ui:composition>
</h:body>
</html>
